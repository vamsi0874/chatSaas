Prompt: PDF Chat SaaS using Next.js, Vercel Blob, Firebase, Clerk, and LangChain

Title:
ğŸ“„ Build an AI PDF Chat App with Next.js, Vercel Blob Storage, Firebase, Clerk Auth & LangChain

Prompt:

Build a PDF Chat SaaS web application using Next.js 14 (App Router), TypeScript, Tailwind CSS, Shadcn UI, Framer Motion, Vercel Blob for file storage, Firebase Firestore for database, Clerk for authentication, and LangChain + Gemini/OpenAI for AI responses.

ğŸ§  Core Idea

Users can:

Upload PDFs (stored in Vercel Blob)

View them in their dashboard

Chat with the content using AI that retrieves context from their uploaded files.

ğŸ  Home Page

Clean, SaaS-style landing page with:

Hero section: â€œUpload your PDFs and chat with them using AI.â€

Subtext: â€œPowered by LangChain, Gemini, and Vercel Blob.â€

CTA buttons: â€œSign Inâ€ (Clerk) and â€œGet Startedâ€

Smooth entrance animations using Framer Motion.

Responsive and professional layout (use Tailwind + Shadcn components).

ğŸ” Authentication

Use Clerk for:

Sign in / Sign up pages

<UserButton /> in Navbar

Only authenticated users can access /dashboard and /file/[id].

Add route protection using middleware or server-side auth check.

ğŸ“¤ File Upload (Vercel Blob)

On the dashboard, allow users to upload PDFs via drag-and-drop.

Use Vercel Blob SDK for uploads.

After upload:

Store file metadata in Firestore under:

users/{userId}/files/{fileId}


Fields: name, blobUrl, createdAt, size, status.

Extract text from PDF using pdf-parse or LangChainâ€™s PDFLoader.

Generate embeddings using Google Generative AI Embeddings or OpenAI Embeddings.

Store vectors in Pinecone (or Chroma if local).

Show upload progress and success animation (Shadcn Progress + Toast).

ğŸ’¼ Dashboard (/dashboard)

Display all uploaded PDFs for the logged-in user.

Each file shown as a card using Shadcn Card component:

PDF title (from filename)

Uploaded date

â€œOpenâ€ button â†’ navigates to /file/[id]

Option to delete or re-upload files.

Animate layout changes with Framer Motion.

ğŸ’¬ Chat with PDF (/file/[id])

Two-column layout (responsive):

Left Panel: PDF Viewer

Use react-pdf to display PDF pages from blobUrl.

Include pagination or vertical scrolling.

Right Panel: Chat Interface

Display chat messages stored in Firestore (users/{userId}/files/{fileId}/chats).

Use Shadcn Card, ScrollArea, Input, Button.

Support streaming AI responses with loading states (â€œthinkingâ€¦â€ bubble).

On new question:

Add user message to Firestore.

Trigger API route â†’ retrieves relevant embeddings via LangChain â†’ responds using Gemini/OpenAI.

Save AI response to Firestore.

âš™ï¸ Backend Logic

Upload route (/api/upload)

Handles PDF uploads via Vercel Blob.

Parses text and generates embeddings.

Saves metadata to Firestore.

Chat route (/api/chat)

Takes fileId and question as input.

Retrieves embeddings from Pinecone.

Uses LangChainâ€™s RetrievalQAChain or a custom ConversationalRetrievalChain.

Returns structured AI response.

Database schema (Firestore):

users/{userId}/files/{fileId}
    â”œâ”€â”€ name: string
    â”œâ”€â”€ blobUrl: string
    â”œâ”€â”€ uploadDate: timestamp
    â”œâ”€â”€ status: "processing" | "ready"
    â””â”€â”€ chats/{chatId}
        â”œâ”€â”€ role: "human" | "ai"
        â”œâ”€â”€ message: string
        â”œâ”€â”€ createdAt: timestamp

ğŸ§© Project Structure
src/
 â”œâ”€â”€ app/
 â”‚   â”œâ”€â”€ page.tsx                  â†’ Landing page
 â”‚   â”œâ”€â”€ dashboard/page.tsx        â†’ Dashboard with uploads
 â”‚   â”œâ”€â”€ file/[id]/page.tsx        â†’ PDF Chat interface
 â”‚   â”œâ”€â”€ api/
 â”‚   â”‚    â”œâ”€â”€ upload/route.ts      â†’ Handle Vercel Blob upload + embedding
 â”‚   â”‚    â”œâ”€â”€ chat/route.ts        â†’ Chat with AI over PDF
 â”‚   â””â”€â”€ layout.tsx                â†’ Global layout with ClerkProvider
 â”œâ”€â”€ components/
 â”‚   â”œâ”€â”€ Navbar.tsx                â†’ Includes Clerk <UserButton />
 â”‚   â”œâ”€â”€ FileUpload.tsx            â†’ Vercel Blob upload + progress
 â”‚   â”œâ”€â”€ FileCard.tsx              â†’ Dashboard PDF cards
 â”‚   â”œâ”€â”€ Chat.tsx                  â†’ Chat UI
 â”‚   â”œâ”€â”€ PdfViewer.tsx             â†’ React PDF viewer
 â”‚   â”œâ”€â”€ Loader.tsx                â†’ Shadcn skeleton/loading animation
 â”‚   â”œâ”€â”€ EmptyState.tsx            â†’ Shown when no PDFs uploaded
 â”œâ”€â”€ lib/
 â”‚   â”œâ”€â”€ firebase.ts               â†’ Firestore config
 â”‚   â”œâ”€â”€ vercel-blob.ts            â†’ Upload helper functions
 â”‚   â”œâ”€â”€ langchain.ts              â†’ LangChain + embeddings + retriever logic
 â”‚   â”œâ”€â”€ auth.ts                   â†’ Clerk server-side utilities
 â”‚   â”œâ”€â”€ utils.ts                  â†’ Helper functions
 â”œâ”€â”€ styles/
 â”‚   â””â”€â”€ globals.css
 â”œâ”€â”€ types/
 â”‚   â””â”€â”€ index.d.ts                â†’ Type definitions

ğŸª„ Design and UX

Frameworks: TailwindCSS + Shadcn UI

Use Shadcn components: Button, Card, Input, Progress, ScrollArea, Skeleton, Toast.

Use Framer Motion for subtle animations and transitions.

Responsive design for mobile/tablet layouts.

Colors: use neutral palette (zinc, gray, indigo).

Rounded corners, soft shadows, generous spacing.

Add subtle background gradient or pattern for premium feel.

ğŸ’¬ AI Integration

Use LangChainâ€™s ChatPromptTemplate, RetrievalQAChain, and Document structure.

Use Google Generative AI Embeddings (Gemini) or OpenAI embeddings.

Store/retrieve chunks from Pinecone.

Each question fetches the top-K similar chunks and responds contextually.

Persist entire chat history in Firestore.

ğŸš€ Extra Features

Add Toast notifications for success/error.

Add skeleton loaders for dashboard + chat.

Show upload progress percentage.

Display "processing PDF" indicator while embeddings are being created.

Allow chat reloading (refresh-safe due to Firestore sync).

Ready-to-deploy setup for Vercel.

âœ… Deliverables

Fully functional Next.js 14 + TypeScript + Tailwind + Shadcn UI app.

Secure Clerk authentication.

PDF upload using Vercel Blob.

AI-powered chat with LangChain & embeddings.

Firestore database for metadata + chat history.

Production-ready structure, modular components, and responsive design.

Include .env.example for configuration:

CLERK_SECRET_KEY=
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
GOOGLE_API_KEY=
PINECONE_API_KEY=
FIREBASE_API_KEY=
FIREBASE_PROJECT_ID=
BLOB_READ_WRITE_TOKEN=
